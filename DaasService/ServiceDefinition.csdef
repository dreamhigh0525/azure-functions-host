<?xml version="1.0" encoding="utf-8"?>
<ServiceDefinition name="DaasService" xmlns="http://schemas.microsoft.com/ServiceHosting/2008/10/ServiceDefinition" schemaVersion="2012-10.1.8">
    <WorkerRole name="ExecutionRole" vmsize="ExtraSmall">
        <Imports>
            <Import moduleName="Diagnostics" />
        </Imports>
        <LocalResources>
            <LocalStorage name="localStore" sizeInMB="100" cleanOnRoleRecycle="true" />
        </LocalResources>
        <ConfigurationSettings>
            <Setting name="MainStorage" />
            <Setting name="StatsTrackerUrl" />
            <!-- Set to "true" to have the execution worker roles pause on startup. -->
            <Setting name="PauseWorker" />
        </ConfigurationSettings>
    </WorkerRole>
    <WorkerRole name="OrchestratorRole" vmsize="ExtraSmall">
        <Imports>
            <Import moduleName="Diagnostics" />
        </Imports>
        <Endpoints>
            <!-- Must define an endpoint in order to discover other roles -->
            <InternalEndpoint name="InternalEndpoint1" protocol="http" />
        </Endpoints>
        <LocalResources>
            <LocalStorage name="localStore" sizeInMB="100" cleanOnRoleRecycle="true" />
        </LocalResources>
        <ConfigurationSettings>
            <Setting name="MainStorage" />
            <!-- Backpointer to the URL for the WebFront end. This URL gets used when queuing functions 
      so that functions can communicate with the service -->
            <Setting name="WebRoleEndpoint" />
            <!-- Set the execution substrate. Should be either:
       WorkerRoles - function executed via the ExecutionRole instances
       Antares - function executed via an antares site. Set "AntaresWorkerUrl" config
       AzureTasks - function executed via azure tasks. Set the "AzureTask*" configs
      -->
            <Setting name="ExecutionType" />
            <!-- For Azure Task Config 
      Key is secret. Poolname was precreated. 
      -->
            <Setting name="AzureTaskTenantUrl" />
            <Setting name="AzureTaskAccountName" />
            <Setting name="AzureTaskKey" />
            <Setting name="AzureTaskPoolName" />
            <!-- For antares IQueueFunction -->
            <Setting name="AntaresWorkerUrl" />
        </ConfigurationSettings>
    </WorkerRole>
    <WebRole name="WebFrontEnd" vmsize="ExtraSmall">
        <Sites>
            <Site name="Web">
                <Bindings>
                    <Binding name="Endpoint1" endpointName="Endpoint1" />
                </Bindings>
            </Site>
        </Sites>
        <Endpoints>
            <InputEndpoint name="Endpoint1" protocol="http" port="80" />
            <!-- Must define an endpoint in order to discover other roles -->
            <InternalEndpoint name="InternalEndpoint2" protocol="http" />
        </Endpoints>
        <Imports>
            <Import moduleName="Diagnostics" />
        </Imports>
        <ConfigurationSettings>
            <Setting name="LoginPassword" />
            <!-- These should all be same as the Orchestrator Role's-->
            <Setting name="MainStorage" />
            <Setting name="WebRoleEndpoint" />
            <Setting name="ExecutionType" />
            <!-- For antares IQueueFunction -->
            <Setting name="AntaresWorkerUrl" />
            <Setting name="FederatedLoginUrl" />
        </ConfigurationSettings>
    </WebRole>
</ServiceDefinition>